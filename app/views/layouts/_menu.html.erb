<%= tag.nav({class: 'navbar navbar-expand-md sticky-top navbar-dark bg-dark'}) do %>
  <%= link_to TITLE, root_path, {:class => 'navbar-brand'} %>
  <%= button_tag({data: {toggle: 'collapse', target: '#navbarSupportedContent'},
                  type: 'button',
                  class: 'navbar-toggler',
                  aria: {controls: 'navbarSupportedContent', expanded: 'false', label: 'Toggle Navigation'}
                 }) do %>
    <% tag.span({class: 'navbar-toggler-icon'}) %>
  <% end %>
  <%= tag.div({class: 'collapse navbar-collapse', id: 'navbarSupportedContent'}) do %>
    <%= tag.ul({class: 'navbar-nav mr-auto'}) do %>
      <%= tag.li({class: 'nav-item'}) do %>
        <%= link_to 'Link', '#', {class: 'nav-link'} %>
      <% end %>
      <%= tag.li({class: 'nav-item'}) do %>
        <%= link_to 'Link', '#', {class: 'nav-link'} %>
      <% end %>
      <%= tag.li({class: 'nav-item dropdown'}) do %>
        <%= link_to 'Dropdown', '#', {class: 'nav-link dropdown-toggle', id: 'navbarDropdown', role: 'button', data: {toggle: 'dropdown'}, aria: {haspopup: 'true', expanded: 'false'}} %>
        <%= tag.div({class: 'dropdown-menu', aria: {labelledby: 'navbarDropdown'}}) do %>
          <%= link_to 'Action', '#', {class: 'dropdown-item'} %>
          <%= link_to 'Another Action', '#', {class: 'dropdown-item'} %>
          <%= tag.div '', {class: 'dropdown-divider'} %>
          <%= link_to 'Something else here', '#', {class: 'dropdown-item'} %>
        <% end %>
      <% end %>
    <% end %>
    <%= tag.ul({class: 'navbar-nav navbar-right'}) do %>
      <%= tag.li({class: 'nav-item'}) do %>
        <%= form_with :url => '/search', :class => 'form-inline' do |f| %>
          <%= f.text_field 'query', {type: 'search', aria: {label: 'search'}, class: 'form-control mr-sm-2', placeholder: 'Search'} %>
          <%= button_tag({class: 'btn btn-default', type: 'submit'}) do %>
            <%= tag.i('', {class: 'fa fa-search', id: 'searchIcon'}) %>
          <% end %>
        <% end %>
      <% end %>
      <%= tag.li({class: 'nav-item dropdown'}) do %>
        <% if user_signed_in? %>
          <%= link_to('#', {class: 'dropdown-toggle', role: 'button', data: {toggle: 'dropdown'}, aria: {expanded: 'false'}}) do %>
            <%= current_user.full_name %>
            <%= tag.span '', class: 'caret' %>
          <% end %>
        <% else %>
          <%= link_to "Login/Signup", new_user_session_path, class: 'nav-link' %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
